<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kenya Map Only</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.js"></script>
   
    <style>
      body {
  display: flex;
  flex-wrap: wrap; /* Allow wrapping on smaller screens */
  margin: 0;
  font-family: Arial, sans-serif;
  height: 100vh;
}

#map {
  flex: 1 1 70%;
  min-height: 50vh;
  height: 100%;
}

.card-container {
  flex: 1 1 30%;
  padding: 20px;
  background-color: #f4f7fb;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: auto;
}

.card {
  width: 100%;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  padding: 20px;
}

.card-title {
  font-size: 24px;
  color: #333;
  margin-bottom: 10px;
}

.card-subtitle {
  font-size: 18px;
  color: #555;
  margin-bottom: 20px;
}

.card-text {
  font-size: 16px;
  color: #777;
  margin-bottom: 10px;
}

.card-body {
  padding: 10px;
}

.card p {
  font-weight: 500;
}

.card-text span {
  font-weight: 700;
  color: #333;
}

#stations-list {
  margin-top: 10px;
}

.station-block {
  margin-bottom: 15px;
  padding: 10px;
  background-color: #fdfdfd;
  border-left: 4px solid #388e3c;
  border-radius: 5px;
}

.tooltip {
  position: absolute;
  background-color: white;
  padding: 5px;
  border: 1px solid #ccc;
  pointer-events: none;
  font-size: 12px;
  display: none;
  z-index: 100;
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  body {
    flex-direction: column;
  }

  #map {
    width: 100%;
    height: 50vh;
  }

  .card-container {
    width: 100%;
    height: 50vh;
  }
}

@media (max-width: 600px) {
  .card-title {
    font-size: 20px;
  }

  .card-subtitle {
    font-size: 16px;
  }

  .card-text {
    font-size: 14px;
  }

  .station-block {
    font-size: 14px;
  }
}

    </style>
  </head>
  <body>
    <div id="map"></div>

    <div class="card-container">
      <div class="card">
        <div class="card-body">
          <!-- <h5 class="card-title" style="color: #e53935">Select County</h5> -->
          <h6 class="card-subtitle mb-2 text-body-secondary" style="color: #388e3c">
Approved ICT Authority Centers
          </h6>
          <p class="card-text"><span id="county_name">County Name:</span></p>
          <p class="card-text"><span id="county-constituency">Center:</span></p>
          <div id="stations-list"></div>
        </div>
      </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
      var map = new ol.Map({
        target: "map",
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM(),
          }),
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([37.9062, -1.2921]),
          zoom: 6.2,
          minZoom: 6.6,
          maxZoom: 6.8,
        }),
      });

      var kenyaLayer = new ol.layer.Vector({
        source: new ol.source.Vector({
          url: "trygeo.geojson",
          format: new ol.format.GeoJSON(),
        }),
        style: new ol.style.Style({
          stroke: new ol.style.Stroke({ color: "grey", width: 1 }),
          fill: new ol.style.Fill({ color: "rgba(255, 0, 0, 0.1)" }),
        }),
      });

      map.addLayer(kenyaLayer);

      var tooltip = document.getElementById("tooltip");

      var hoverInteraction = new ol.interaction.Select({
        condition: ol.events.condition.pointerMove,
        layers: [kenyaLayer],
        style: new ol.style.Style({
          stroke: new ol.style.Stroke({ color: "red", width: 1 }),
          fill: new ol.style.Fill({ color: "red" }),
        }),
      });

      map.addInteraction(hoverInteraction);

      hoverInteraction.on("select", function (e) {
        var feature = e.selected[0];
        if (feature) {
          var countyName = feature.get("COUNTY_NAM");
          var countyCode = feature.get("COUNTY_COD");
          var center = feature.get("POSITION");

          tooltip.innerHTML =
            "<strong>County Name: " + countyName + "</strong><br>" +
            "County Code: " + countyCode + "<br>" +
            "Centers: " + center;

          var coordinates = e.mapBrowserEvent.coordinate;
          var pixel = map.getPixelFromCoordinate(coordinates);
          tooltip.style.left = pixel[0] + "px";
          tooltip.style.top = pixel[1] + "px";
          tooltip.style.display = "block";
        } else {
          tooltip.style.display = "none";
        }
      });

      var clickInteraction = new ol.interaction.Select({
        condition: ol.events.condition.click,
        layers: [kenyaLayer],
      });

      map.addInteraction(clickInteraction);

      clickInteraction.on("select", function (e) {
        var feature = e.selected[0];
        if (feature) {
          var countyName = feature.get("COUNTY_NAM");
          var centers = feature.get("CENTERS");

          document.getElementById("county_name").innerHTML =
            "County Name: " + countyName;

          // Count of centers
          document.getElementById("county-constituency").innerHTML =
            "Number of Center(s): " + (centers ? centers.length : 0);

          // Display centers
          var stationContainer = document.getElementById("stations-list");
          stationContainer.innerHTML = "";

          if (Array.isArray(centers)) {
            centers.forEach(function (center, index) {
              var centerHTML = `
                <div class="station-block">
                  <strong>${index + 1}. ${center.organisation}</strong><br>
                  Type: ${center.type}<br>
                  Category: ${center.category}<br>
                  Headquarters: ${center.headquaters}<br>
                  Presence: ${center.presence}
                </div>
              `;
              stationContainer.innerHTML += centerHTML;
            });
          } else {
            stationContainer.innerHTML = "<p>No centers available.</p>";
          }
        }
      });
    </script>
  </body>
</html>
